/*
 * Iran Map - SVG and Responsive.
 * Free and open source.
 * Version 1.1.0
 * By: MohammadReza Pourmohammad.
 * Email: mohammadrpm@gmail.com
 * Web: http://mrpm.ir
 */

jQuery(function() {

var def = "#ostan option[value=default]" ;

    jQuery(window).resize(function() {
        a()
    });

    function a() {
        var b = jQuery("#IranMap .list").height();
        var c = jQuery("#IranMap .list").width();
        if (b > c) {
            jQuery("#IranMap svg").height(c).width(c)
        } else {
            jQuery("#IranMap svg").height(b).width(b)
        }
    }
    a();
    jQuery("#IranMap svg g path").hover(function() {
            // jQuery("#IranMap svg g path").removeClass('hover');
            var c = jQuery(this).attr("class");
            // var b = jQuery(this).parent("g").attr("class");
            var z = '#ostan option[value='+c+']';
            var d = jQuery(z).html();
            if (d) {
                // jQuery(z).prop("selected", true);
                jQuery("#IranMap .show-title").html(d).css({
                    display: "block"
                })
            }
        },
            function() {
                // jQuery(def).prop("selected", true);
                jQuery("#IranMap .show-title").html("").css({
                    display: "none"
                })
            }
    );
    jQuery("#IranMap svg g path").click(function () {
        var c = jQuery(this).attr("class");
        // var b = jQuery(this).parent("g").attr("class");
        def = '#ostan option[value='+c+']';
        jQuery(def).prop("selected", true);
        jQuery('#ostan option').removeClass("selected");
        jQuery('#ostan option[value='+c+']').addClass("selected");
        jQuery("#IranMap svg g path").removeClass('click');
        jQuery("#IranMap svg g path."+c).addClass('click');
        // var b = "#IranMap svg g." + c + " path." + e;
        // alert(c);
        // sel(c);
        // jQuery("#IranMap svg g path").unbind("mouseenter mouseleave");
        selectCity();
    });

    /*jQuery("#IranMap svg g path").click(function () {
        var c = jQuery(this).attr("class");
        // var b = jQuery(this).parent("g").attr("class");
        var z = '#ostan option[value='+c+']';
        jQuery(z).prop("selected", true);

    });*/
    //jayozine cm paeenish

        jQuery( "select" ).change(function() {
            jQuery( "select#ostan option:selected" ).each(function() {

                var e = jQuery(this).val();
                var c = 'province';
                var b = "#IranMap svg g." + c + " path." + e;
                var f = "#IranMap svg g." + c + " path";
                jQuery(f).removeClass("click");
                jQuery(b).addClass("click");
                jQuery('#ostan option').removeClass("selected");
                jQuery('#ostan option[value='+e+']').addClass("selected");
                selectCity();

                //select city
                // jQuery()

            });

        });
    function selectCity() {
        var  d = jQuery("#ostan option:selected").val();
        jQuery("#city-menu > ul").addClass('hide');
        jQuery("#resaler-info ul").addClass('hide');
        jQuery("#city-menu ul li").removeClass('active');
        jQuery("#city-menu > ul#"+d).removeClass('hide');
        jQuery("#city-menu ul li a").click(function (e) {
            e.preventDefault();
            jQuery("#city-menu ul li").removeClass('active');
            jQuery(this).parent('li').addClass('active');
            var href = jQuery(this).attr('href');
            jQuery("#resaler-info ul").addClass('hide');
            jQuery("#resaler-info ul#"+href).removeClass('hide');
        });
    }


    /*jQuery("#IranMap .list ul li ul li a").hover(function() {
        var e = jQuery(this).parent("li").attr("class");
        var c = jQuery(this).parent("li").parent("ul").parent("li").attr("class");
        var b = "#IranMap svg g." + c + " path." + e;
        var d = jQuery(b).attr("class");
        jQuery(b).attr("class", d + " hover")
    }, function() {
        var e = jQuery(this).parent("li").attr("class");
        var c = jQuery(this).parent("li").parent("ul").parent("li").attr("class");
        var b = "#IranMap svg g." + c + " path." + e;
        var d = jQuery(b).attr("class");
        jQuery(b).attr("class", d.replace(" hover", ""))
    });*/
    jQuery("#IranMap").mousemove(function(d) {
        var c = 0;
        var h = 0;
        if (!d) {
            var d = window.event
        }
        if (d.pageX || d.pageY) {
            c = d.pageX;
            h = d.pageY
        } else {
            if (d.clientX || d.clientY) {
                c = d.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                h = d.clientY + document.body.scrollTop + document.documentElement.scrollTop
            }
        }
        if (jQuery("#IranMap .show-title").html()) {
            var f = jQuery(this).offset();
            var b = (c - f.left + 25) + "px";
            var g = (h - f.top - 5) + "px";
            jQuery("#IranMap .show-title").css({
                left: b,
                top: g
            })
        }
    })
});